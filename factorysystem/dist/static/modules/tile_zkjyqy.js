/**/_jsload2&&_jsload2('tile', 'function Ch(){this.Vf=this.gq=this.Qp=this.Vj=s;this.wE=t;this.hi=s}w.lang.va(Ch,wd,"MobileInfoWindow"); w.extend(Ch.prototype,{initialize:function(a){this.M=a;this.hi=document.createElement("div");this.hi.className="iw";this.hi.style.cssText="position:absolute; line-height:28px; text-align:center; border:0px;";var b=this.Vj=document.createElement("div");this.hi.appendChild(b);this.Qp=document.createElement("div");this.Qp.className="iw_l";b.appendChild(this.Qp);this.gq=document.createElement("div");this.gq.className="iw_r";b.appendChild(this.gq);this.yk=document.createElement("a");this.yk.setAttribute("target", "_blank");this.yk.className="iw_s iw_s0 iw_c";this.yk.innerHTML="<div class=\'iw_bg iw_cc\'></div>";b.appendChild(this.yk);a.Zf().wD.appendChild(this.hi);this.bind();this.Vf=this.yk.getElementsByTagName("DIV")[0];this.Qp.style.display="block";this.gq.style.display="block";return this.hi},bind:function(){var a=this;w.U(a.Qp,"click",function(b){a.GZ();b.preventDefault();b.stopPropagation()});w.U(a.gq,"click",function(b){a.kZ();b.preventDefault();b.stopPropagation()});w.U(a.yk,"click",function(a){a.stopPropagation()}); w.Pb("touchstart touchmove touchend gesturestart gesturechange mousedown mouseout mouseover click mousewheel keydown selectstart".split(" "),function(b){w.U(a.yk,b,oa);w.U(a.Qp,b,oa);w.U(a.gq,b,oa)})},jJ:ba(),YI:ba(),la:function(){return new R(this.rI.lng,this.rI.lat)},ta:ba(),bb:u("wE"),$:function(){w.R.$(this.ba);this.hi.style.display="none";this.wE=t},show:function(a){a&&(this.point=a);w.R.show(this.ba);this.hi.style.display="block";this.wE=q;this.M.aa.vb=this},L_:function(){var a=this.M,b=this.Xh, c=this.Vj.offsetWidth,e=this.Vj.offsetHeight,f=a.ub(),c=c/2+16,e=e/2+78;if(this.Xh){var g=new T(0,0);b.x<c?g.x=c-b.x:f.width-b.x-8<c&&(g.x=f.width-b.x-8-c);b.y<e?g.y=e-b.y:60>f.height-b.y&&(g.y=f.height-b.y-60);0==g.x&&0==g.y||a.Mg(g.x,g.y)}},switchTo:function(a){this.Xh=a.point;this.ad=a.name;this.tk=a.uid;this.mk=a.Ea;this.ET=parseInt(this.M.platform.style.left);this.FT=parseInt(this.M.platform.style.top);this.rI=this.M.$b(this.Xh);this.show();this.p_();this.kO()},S5:function(){this.Vj.className= "iw_rt";this.show();this.kO()},p_:function(){this.yk.setAttribute("href","http://map.baidu.com/place/detail?uid="+this.tk+"&output=html&source=jsapi&operate=mapclick&clicktype=vector");this.Vj.className="iw_rt";this.Vf.innerHTML="<div class=\'iw_poir\'><div class=\'crl_ar\' style=\'white-space:nowrap;text-overflow:ellipsis;overflow:hidden;\'>"+this.ad+"</div></div>";this.draw()},kO:function(){var a=this;a.mE||(a.mE=setTimeout(function(){a.L_();clearTimeout(a.mE);a.mE=s},100))},Y6:function(){var a=$("popList"); 43<this.Vf.textContent.length&&(58<=this.Vf.textContent.length?a.hb("zoom2"):a.hb("zoom1"))},U2:function(){this.Vf.innerHTML=""},draw:function(){if(this.Xh){var a=this.Xh,b=a.y;this.hi.style.left=a.x-98-this.ET+"px";this.hi.style.top=b-62-this.FT+"px"}},W4:function(){db()&&(location.href="http://map.baidu.com/detail?qt=ninf&wd=&detail=scope&uid="+this.tk);M()&&(location.href="http://map.baidu.com/mobile/#place/detail/qt=inf&c=131&uid="+this.tk)},GZ:function(){this.M.$b(this.Xh);var a=this.M.ka(), a=Math.pow(2,18-a),b=this.M.ub(),c=this.M.Gb,a="http://map.baidu.com/mobile/?third_party=uri_api#index/searchnearby/foo=bar/"+this.hZ({nb_x:c.lng+a*(this.Xh.x-b.width/2),nb_y:c.lat-a*(this.Xh.y-b.height/2),center_name:this.ad,from:"searchnearby"});window.open(a,"_blank")},kZ:function(){var a=this.M.oh,b=this.M.Td()?"&operate=vectorclick":"&operate=mapclick",a=C.bd+"direction?origin=\\u6211\\u7684\\u4f4d\\u7f6e&destination="+this.ad+"&mode=navigation&output=html&src=jsapi"+b+"&region="+a;Za("navlinkmobile"); window.open(a,"_blank")},hZ:function(a){if(!a)return"";var b=[],c;for(c in a)b.push(c+"="+encodeURIComponent(a[c]));return b.join("&")}});C.C1=Ch;w.extend(Ud.prototype,{jQ:function(){this.XG(this.map);this.Rp(0)},pE:function(a){this.Iu=new Vd(this);this.Iu.Se(new Wd(this.map,this.Iu,a.$e));Wa(Xa(3,4),["layer","indoor"])},Rp:function(){this.map.ka();this.loaded||(this.Qx(),this.loaded=q);this.dg()},xa:function(){var a=this,b=a.map;b.addEventListener("loadcode",function(){a.Rp()});b.addEventListener("addtilelayer",function(b){a.Se(b)});b.addEventListener("removetilelayer",function(b){a.fg(b)});b.addEventListener("setmaptype",function(b){a.Qg(b)}); b.addEventListener("zoomstartcode",function(){a.Rc()});a.map.addEventListener("setcustomstyles",function(b){a.hu(b.target);a.dg(q);Wa(Xa(1,2,2),["instance","custom_style","image"])});b.addEventListener("initindoorlayer",function(b){a.pE(b)});a.XG(b)},XG:function(a){var b=this;a.addEventListener("mousewheel",function(a){b.xZ(a)});a.addEventListener("dblclick",function(a){b.HK(a)});a.addEventListener("rightdblclick",function(a){b.HK(a)});a.addEventListener("minuspress",function(a){b.GM(a)});a.addEventListener("pluspress", function(a){b.GM(a)});a.addEventListener("moving",function(){b.dg()});a.addEventListener("resize",function(){b.map.Td()||b.dg()});b.map.addEventListener("setcustomstyles",function(){b.Wv()});a.addEventListener("onvectorloaded",function(){a.Td()&&(b.Wv(),b.xg.style.visibility="")})},j2:function(){this.b1=new window.VectorLayer(this.map.K.Ce);this.map.Se(this.b1)},Se:function(a){var b=this,c=a.target;b.map.Td();c.Cn&&this.map.Se(c.Cn);if(c.Wx){for(a=0;a<b.Sg.length;a++)if(b.Sg[a]===c)return;bb.load("vector", function(){c.xa(b.map,b.xg);b.Sg.push(c)},q)}else{for(a=0;a<b.Cf.length;a++)if(b.Cf[a]===c)return;b.Cf.push(c);c.xa(this.map,this.Ql);b.map.loaded&&b.dg()}},fg:function(a){a=a.target;this.map.Td();a.Cn&&this.map.fg(a.Cn);if(a.Wx){for(var b=0,c=this.Sg.length;b<c;b++)a===this.Sg[b]&&this.Sg.splice(b,1);a.remove()}else{var c=this.Kg,e=this.nj;for(b in e){var f=b.split("-")[1];f===a.ca+""&&delete e[b]}for(b in c)f=b.split("-")[1],f===a.ca+""&&delete c[b];b=0;for(c=this.Cf.length;b<c;b++)a===this.Cf[b]&& this.Cf.splice(b,1);a.remove();this.dg()}},xZ:function(a){var b=this.map;if(b.K.pp){var c=b.ko(b.Xa+(a.xq===q?1:-1));c.tD||(b.dispatchEvent(new Q("onzoomstart")),b.Ac=b.Xa,b.Xa=c.zoom,a=a.$a,c=this.lA(a),zoomUnits=b.wa().Ub(b.ka()),b.Gb=new N(c.lng+(b.width/2-a.x)*zoomUnits,c.lat-(b.height/2-a.y)*zoomUnits),b.ee=b.Cc.Bh(b.Gb,b.Ob),this.zoom(a))}},HK:function(a){var b=this.map;if(b.K.hD){var c=a.$a,e=1,f=c,g=new O(0,0);"onrightdblclick"===a.type&&(e=-1,f=new T(b.width/2,b.height/2));a=b.ko(b.Xa+e); a.tD?1===e&&(c=b.sg(c),b.Di(c)):(b.dispatchEvent(new Q("onzoomstart")),b.Ac=b.Xa,b.Xa=a.zoom,1===e&&(b.Gb=this.lA(c),b.ee=b.Cc.Bh(b.Gb,b.Ob),e=0.5*(b.wa().Ub(b.Ac)/b.wa().Ub(a.zoom)),g.width=c.x-Math.round(b.width/2)*e,g.height=c.y-Math.round(b.height/2)*e),this.zoom(f,g));M()&&(b=b.uh())&&b.$()}},GM:function(a){var b=this.map;if(b.K.np){if(!this.fi){var c=b.ko(b.Xa+("onpluspress"===a.type?1:-1));c.tD||(b.dispatchEvent(new Q("onzoomstart")),a=new T(b.width/2,b.height/2),b.Ac=b.Xa,b.Xa=c.zoom,b.uh()&& (a=b.xo(b.uh().la(),b.Ac),c=b.sg(a,b.Ac),b.uk(b.width/2-a.x,b.height/2-a.y,c,q)),this.zoom(a))}}else"onpluspress"===a.type?b.lG():b.mG()},lA:function(a){var b=this.map,c=b.Gb,e=b.wa().Ub(b.Ac);return new N(c.lng+e*(a.x-b.width/2),c.lat-e*(a.y-b.height/2))},zoom:function(a,b){var c=this,e=c.map,f=e.Xa,g=e.K.dG,i=f>g?q:t;if(f<e.Ac&&(f===g||f===g-1))i=q;var k=b?b.width:0,m=b?b.height:0,e=this.map,g=e.K,c=this,n=a.x-parseInt(i?c.Yy.style.left:c.Kb.style.left,10)-e.offsetX,o=a.y-parseInt(i?c.Yy.style.top: c.Kb.style.top,10)-e.offsetY;e.Uc&&w.R.$(e.Uc);c.Ql.style.visibility="hidden";c.xg&&(c.xg.style.visibility="hidden");this.uU(i);c.qo.style.visibility="hidden";this.ng.style.visibility="hidden";var p=[],i=e.Xa-e.Ac;c.gr?0<e.Xa-e.Ac?c.gr++:c.gr--:c.gr=i;this.fi&&0===this.fi.Ey&&(this.fi.stop(),this.fi=s,i=c.gr);if((!b||0===b.width&&0===b.height)&&g.np)e.aa.u1.action(a,0<i?q:t);var i=Math.pow(2,i),v=this.zd,z=v.style;z.visibility="";if(e.K.Ck)if(this.ng.style.visibility="visible",z.visibility="hidden", g=w.platform.Rk&&2.3<parseFloat(w.platform.eC)?q:t,w.platform.Rk&&!g)e.dispatchEvent(new Q("onzoomend"));else{if(f!==e.Ac){var B=f>e.Ac?q:t;if(c.EM!==q){c.EM=q;var A=e.platform.style,g=e.offsetX,n=e.offsetY,o=e.width,f=e.height,D=a?a.x-g:o/2-g,F=a?a.y-n:f/2-n;A.WebkitTransformOrigin=D+"px "+F+"px";b=new O(0,0);new Gb({duration:300,cc:Hb.aD,Mc:30,za:function(a){var c=B?1+a:1-a/2;A.WebkitTransformOrigin=D+"px "+F+"px";A.WebkitTransform="translate3d("+-b.width*a+"px, "+-b.height*a+"px,0px) scale("+c+ ")"},finish:function(){e.Uc&&setTimeout(function(){w.R.show(e.Uc)},100);e.dispatchEvent(new Q("onzoomend"));A.WebkitTransform="";c.EM=t}})}}}else{for(f=v.children.length-1;-1<f;f--){var G={},H=v.children[f].style;G.top=parseInt(H.top)||0;G.left=parseInt(H.left)||0;G.width=parseInt(H.width);G.height=parseInt(H.height);G.UW=G.width*i-G.width;G.uW=G.height*i-G.height;G.pf=(G.left-n)*i-(G.left-n);G.qf=(G.top-o)*i-(G.top-o);p[f]=G;H.display="block"}v.tT=parseInt(v.style.left);v.xT=parseInt(v.style.top); this.fi&&(this.fi.stop(),this.fi=s);this.fi=new Gb({Mc:20,duration:g.np?g.v1:1,cc:Hb.bD,za:function(a){if(!(a<0.1)){for(var b=p.length-1;b>-1;b--){var c=p[b];if(v.children[b]){var e=v.children[b].style;e.top=Math.round(c.top+c.qf*a)+"px";e.left=Math.round(c.left+c.pf*a)+"px";e.width=Math.ceil(c.width+c.UW*a)+"px";e.height=Math.ceil(c.height+c.uW*a)+"px"}}if(k||m){z.left=v.tT-k*a+"px";z.top=v.xT-m*a+"px"}}},finish:function(){c.dg();e.Uc&&(w.fa.na&&w.fa.na<8||document.compatMode==="BackCompat"?w.R.show(e.Uc): setTimeout(function(){w.R.show(e.Uc)},100));c.Ql.style.visibility="";c.qo.style.visibility="";c.ng.style.visibility="";delete c.gr;e.dispatchEvent(new Q("onzoomend"));setTimeout(function(){if(c.xg)c.xg.style.visibility="";c.Wv()},10);v=s;c.fi=s}})}},Qg:function(){var a=this,b=a.map;b.addEventListener("tilesloaded",function(){setTimeout(function(){a.Wv()},200);b.removeEventListener("tilesloaded",arguments.callee)});for(var c in this.Kg)this.Lx(this.Kg[c]);for(c in this.nj)this.Lx(this.nj[c]);c=this.Fj; for(var e=0,f=c.length;e<f;e++)c[e].remove();delete this.Kb;this.Fj=[];this.nj=this.Kg={};this.Qx();this.dg()},uU:function(a){var b=this.map,a=a||t;if(this.zd)this.zd.parentNode&&!this.fi&&(this.zd.parentNode.removeChild(this.zd),this.zd=s,this.zd=a?this.Yy.cloneNode(q):this.Kb.cloneNode(q));else if(a){this.zd=this.Yy.cloneNode();for(var a=this.Yy.childNodes,c=0,e=a.length;c<e;c++){var f=a[c].cloneNode(q);f.style.display="none";f.getContext("2d").drawImage(a[c],0,0);this.zd.appendChild(f)}}else this.zd= this.Kb.cloneNode(q);a=this.zd;c=a.style;c.display="";c.zIndex-=100;b.platform.insertBefore(a,b.platform.firstChild)},Wv:function(){this.zd&&(be(this.zd),this.zd.parentNode&&(this.zd.parentNode.removeChild(this.zd),this.zd.innerHTML="",this.zd=s))}}); ');
