/**/_jsload2&&_jsload2('poly', 'function Zh(a,b){return!a||!b?0:Math.round(Math.sqrt(Math.pow(a.lng-b.lng,2)+Math.pow(a.lat-b.lat,2)))}function ai(a,b){rb.call(this);this.point=a;this.type=b;this.D={}}w.lang.va(ai,rb,"Vertex"); w.extend(ai.prototype,{initialize:function(a){this.map=a;var b="";this.point=fb(this.point,this.map.K.Y2);var b=this.type?"BMap_vectex BMap_vectex_nodeT":"BMap_vectex BMap_vectex_node",c=this.xH=this.ba=document.createElement("div");c.className=b;a.Zf().iP.appendChild(c);this.zA();return c},draw:function(){var a=this.map.cf(this.point);a&&(this.xH.style.left=a.x-5+"px",this.xH.style.top=a.y-5+"px")},ta:function(a){if(a instanceof R||a instanceof N)this.point=this.D.point=this.map?fb(a,this.map.K.Ma): a,this.draw()},ek:u("point"),la:function(){var a=this.map;return a?ob(this.point,a.K.Ma):this.point},zA:function(){function a(a,b){b.pixel=b.$a=a.$a;b.point=b.point=a.point;b.pointN=b.yf=a.yf;return b}function b(a){var b=a.clientX,c=a.clientY;a.changedTouches&&(b=a.changedTouches[0].clientX,c=a.changedTouches[0].clientY);return new T(b,c)}if(this.ba&&!this.ba.Vi){this.ba.Vi=q;var c=this.map,e=this,f=0,g=0,i=0,k={x:0,y:0};this.Ts=function(a){pa(a);if(2!=a.button){e.Hl=q;var k=c.uc(e.point),o=b(a); f=o.x-k.x;g=o.y-k.y;i=mb();e.map.aa.ov=e;w.U(document,"mousemove",e.sj);w.U(document,"mouseup",e.rj);w.U(document,"touchmove",e.sj);w.U(document,"touchend",e.rj);e.ba&&e.ba.setCapture&&e.ba.setCapture();e.ba.style.cursor=e.D.Hd;"touchstart"==a.type&&oa(a)}};this.sj=function(i){if(e.Hl){i=b(i);k=i=new T(i.x-f,i.y-g);e.Wz=i;var n=e.map.$b(i),o=e.map.sg(i),n={$a:i,point:n,yf:o};e.Ul=e.Vl=0;if(20>=i.x||i.x>=e.map.width-20||50>=i.y||i.y>=e.map.height-10){if(20>=i.x?e.Ul=8:i.x>=e.map.width-20&&(e.Ul=-8), 50>=i.y?e.Vl=8:i.y>=e.map.height-10&&(e.Vl=-8),!e.Je)e.Je=setInterval(function(){c.Mg(e.Ul,e.Vl,{noAnimation:q});var a=c.$b(e.Wz);e.ta(a)},30)}else e.Je&&(clearInterval(e.Je),e.Je=s),e.ta(o);e.yl||(e.dispatchEvent(a(n,new Q("ondragstart"))),e.yl=q);e.dispatchEvent(a(n,new Q("ondragging")))}};this.rj=function(){e.ba&&e.ba.releaseCapture&&e.ba.releaseCapture();e.Hl=t;e.map.aa.ov=s;w.Ge(document,"mousemove",e.sj);w.Ge(document,"mouseup",e.rj);w.Ge(document,"touchmove",e.sj);w.Ge(document,"touchend", e.rj);f=g=0;e.Je&&(clearInterval(e.Je),e.Je=s);if(100<=mb()-i&&(2<k.x||2<k.y))e.yl=t,e.dispatchEvent(a({$a:e.map.uc(e.la()),point:e.la(),yf:e.ek()},new Q("ondragend"))),k.x=k.y=0;e.fm();e.ba&&(e.ba.style.cursor=e.D.of?"pointer":"")};this.qW=function(b){pa(b);e.dispatchEvent(a({$a:e.map.uc(e.la()),point:e.la()},new Q("ondelVertexMarker")))};w.U(this.ba,"mousedown",this.Ts);w.U(this.ba,"touchstart",this.Ts);w.U(this.ba,"contextmenu",this.qW)}}});w.extend(Cd.prototype,{zQ:function(a){return this.repeat?this.BQ(a):this.AQ(a)},BQ:function(a){var b=this.repeat,c=[],e,f,g;if(this.QI){e=Math.floor(1/this.repeat)+1;for(f=0;f<e;f++)c.push(bi(a,1-b*f,q))}else{g=a.hj[a.hj.length-1];e=Math.floor(g/b)+1;for(f=0;f<e;f++)c.push(bi(a,g-f*b,t))}return c},AQ:function(a){return[bi(a,this.mk,this.OI)]},hide:function(){if(this.$c&&0<this.$c.length)for(var a=this.$c.length-1;0<=a;a--)this.$c[a].$()},show:function(){if(this.$c&&0<this.$c.length)for(var a=this.$c.length- 1;0<=a;a--)this.$c[a].show()}}); function bi(a,b,c){var e=a.ia;a.IF&&(e=a.IF);if(c){if(0>=b)return{point:e[0],index:1};if(1<=b)return{point:e[e.length-1],index:e.length-1};c=a.XS*b;b=ci(c,a.bm);a=(c-a.bm[b-1])/(a.bm[b]-a.bm[b-1])}else{c=b;b=a.hj[a.hj.length-1];if(0>=c)return{point:e[0],index:1};if(c>=b)return{point:e[e.length-1],index:e.length-1};b=ci(c,a.hj);a=(c-a.hj[b-1])/(a.hj[b]-a.hj[b-1])}c=e[b];e=U.Qa(e[b-1]);c=U.Qa(c);return{point:U.Wb(new R(e.lng+(c.lng-e.lng)*a,e.lat+(c.lat-e.lat)*a)),index:b}} w.mc.indexOf=function(a,b,c){var e=a.length,c=c|0;for(0>c&&(c=Math.max(0,e+c));c<e;c++)if(c in a&&a[c]===b)return c;return-1};function ci(a,b){var c=di(b.concat(a));return w.mc.indexOf(c,a)}function di(a){if(2>a.length)return a;for(var b=Math.floor(a.length/2),c=a.slice(0,b),a=a.slice(b),c=di(c),a=di(a),b=[];0<c.length&&0<a.length;)c[0]>a[0]?b.push(a.shift()):b.push(c.shift());return b.concat(c).concat(a)};w.extend(yd.prototype,{initialize:function(a){a&&this.Dv&&a.addEventListener("onmousemove",this.Dv);a=rb.prototype.initialize.call(this,a);this.D.xe===q&&(this.ii(),this.xk());return a},Rj:function(){this.ba=(this.eo=ei.dt(this.map)).So()},fd:u("ba"),ga:function(){function a(a,b){var c=a.srcElement||a.target,i=Qb(),k=a.pageX?a.pageX:a.clientX+i[1],i=a.pageY?a.pageY:a.clientY+i[0];if(a&&b&&k&&i&&c){var c=w.lang.je(c.ca).map,m=w.R.la(c.Ya);b.$a=new T(k-m.left,i-m.top);b.point=c.$b(b.$a);b.yf=c.sg(b.$a); b.pixel=b.$a;b.point=b.point;b.pointN=b.yf}return b}var b=this.ba,c=this;"canvas"!==ei.dt(this.map).Fp()&&!M()&&(c.D.of&&(b.style.cursor="pointer",w.U(b,"click",function(b){c.wI&&c.wI.Tb(c.map.tv())&&c.dispatchEvent(a(b,na(new Q("onclick"),b)))}),w.U(b,"dblclick",function(b){c.dispatchEvent(a(b,na(new Q("ondblclick"),b)))}),(!w.fa.Ve||4>w.fa.Ve)&&w.U(this.ba,"contextmenu",function(b){c.dispatchEvent(a(b,na(new Q("onrightclick"),b)))})),w.U(b,"mousedown",function(b){c.dispatchEvent(a(b,na(new Q("onmousedown"), b)));c.wI=c.map.tv()}),w.U(b,"mouseup",function(b){c.dispatchEvent(a(b,na(new Q("onmouseup"),b)))}),w.U(this.ba,"mouseup",function(b){c.dispatchEvent(a(b,na(new Q("onmouseup"),b)));w.fa.Ve>=4&&(b.button===2&&c.D.of)&&c.dispatchEvent(a(b,na(new Q("onrightclick"),b)))}));b=s;this.Vi||(this.Vi=q,this.Dv=function(a){if(c.map&&!c.map.aa.ov){var b=c.wS(a.point),g=parseFloat(b.Ga),i;if(g<c.D.gN){i=c.Wa.Xx?new Q("onmousemove"):new Q("onmouseover");c.Wa.FM=t;c.Wa.Xx=q}else if(!c.Wa.FM&&c.Wa.Xx){i=new Q("onmouseout"); c.Wa.Xx=t;c.Wa.FM=q}if(i){if(!(c instanceof Rd)&&i.type==="onmousemove"&&c.Wa.Xx===q&&(g===0||g>c.D.gN)){i.pixel=i.$a=a.$a;i.point=i.point=a.point;i.pointN=i.yf=a.yf}else{i.point=i.point=this.DN(b.$a);i.pixel=i.$a=this.uc(i.point);i.pointN=i.yf=this.yT(b.$a)}c.dispatchEvent(i)}}},this.map.addEventListener("onmousemove",this.Dv),this.addEventListener("mouseover",ba()),this.addEventListener("mouseout",ba()))},draw:function(a){if(this.ba&&this.eo){var b;if(this.D.sX){this.yD=[];b=s;for(var c=0;c<this.ia.length- 1;c++){var e=this.CV(this.ia[c],this.ia[c+1],b);b=e[e.length-1]&&e[e.length-1].Ah;this.yD=this.yD.concat(e)}b=this.NH(this.yD)}else if(this.D.FE&&0<this.ia.length){this.Nt=[];b=s;for(c=0;c<this.ia.length-1;c++)this.Nt.push({point:this.ia[c],Ah:b||U.Qa(this.ia[c])}),e=b||U.Qa(this.ia[c]),b=U.Qa(this.ia[c+1]),15437726<Zh(b,e)&&(b.lng=b.lng<e.lng?b.lng+Bb:b.lng-Bb),this.Nt.push({point:this.ia[c+1],Ah:b}),b=this.Nt[this.Nt.length-1].Ah;b=this.NH(this.Nt)}else b=this.vv(this.ia);"canvas"===this.eo.Nb&& this.bw?(this.bw(),this.eo.Qd(this.ba,b,this.D)):this.eo.Qd(this.ba,b);this instanceof Rd&&this.D.si&&this.AR(a)}},mb:function(){this.map&&(this.initialize(this.map),this.ba.style.WebkitUserSelect="none",this.draw())},vv:function(a){var b=this.map,c=[],e=[],f=b.Jd(),g=this.Jd();if(!f.Bt(g)||0===a.length||!this.ba||!this.Nc())return this.IF=e,[c];this.D.xe||(f=this.Km(b.ka()),this.lf[f]?a=this.lf[f]:(a=fi(a,this.Mk(b.ka())),a=this.lf[f]=a));f=this.D.V0;c.push(b.cf(a[0],s,f));e.push(a[0]);for(var i= g=1,k=a.length;g<k;g++){var m=b.cf(a[g],s,f);m.Tb(c[i-1])||(c.push(m),e.push(a[g]),i++)}this.IF=e;return[c]},d2:function(a){if(a&&0<a.length){for(var b=[],c=s,e=0;e<a.length-1;e++){b.push({point:a[e],Ah:c||U.Qa(a[e])});var f=c||U.Qa(a[e]),c=U.Qa(a[e+1]);30037726<Zh(c,f)&&(c.lng=c.lng<f.lng?c.lng+Bb:c.lng-Bb);b.push({point:a[e+1],Ah:c});c=b[b.length-1].Ah}return b}},Km:function(a){return this.D.Km?this.D.Km(a):6>a?0:10>a?1:15>a?2:3},Mk:function(a){return this.D.Mk?this.D.Mk(a):yd.VE[this.Km(a)]},Yr:function(a){this.lf.length= 0;a=yd.tx(a);this.Lo=a.slice(0,a.length-1);this.ia=a.slice(0);this.Kh();this.draw();this.dispatchEvent(new Q("onlineupdate"))},CV:function(a,b,c){var e=[];e.push({point:a,Ah:c||U.Qa(a)});var f=c||U.Qa(a);if(a.Tb(b)||25E4>U.Jk(a,b)){var c=U.Qa(b),g=Zh(c,f);30037726<g&&(c.lng=c.lng<f.lng?c.lng+Bb:c.lng-Bb);c&&e.pop();e.push({point:b,Ah:c});return e}for(var g=U.Kd(bc(a.lng),bc(a.lat),bc(b.lng),bc(b.lat)),c=Math.round(g/15E4),i=this.lK(a,b),k=0;k<c;k++){var m=this.mK(a,b,k/c,i),n=U.Qa(m),g=Zh(n,f);30037726< g&&(n.lng=n.lng<f.lng?n.lng+Bb:n.lng-Bb);e.push({point:m,Ah:n});f=n}c=U.Qa(b);g=Zh(c,f);30037726<g&&(c.lng=c.lng<f.lng?c.lng+Bb:c.lng-Bb);e.push({point:b,Ah:c});return e},Qd:function(a){this.Yr(a);this.D.xe===q&&(this.ii(),this.xk())},vn:function(a,b){b&&this.ia[a]&&(this.lf.length=0,this.ia[a]=new R(b.lng,b.lat),this.Kh(),this.D.xe===q&&(this.ii(),this.xk()),this.draw(),this.dispatchEvent(new Q("onlineupdate")))},setStrokeColor:function(a){this.D&&(this.D.strokeColor=a);this.dm("strokecolor",a)}, oq:function(a){0<a&&(this.D.qc=a,this.dm("strokeweight",a),"dashed"===this.PL()&&(this.map&&"svg"===ei.dt(this.map).Fp())&&this.dm("strokestyle","dashed"))},mq:function(a){a===l||(1<a||0>a)||(this.D.xd=a,this.map&&this.dm("strokeopacity",a))},fu:function(a){1<a||0>a||(this.D.Cg=a,this.dm("fillopacity",a))},nq:function(a){"solid"!==a&&"dashed"!==a||(this.D.strokeStyle=a,this.dm("strokestyle",a))},setFillColor:function(a){this.D.fillColor=a||"";this.dm("fillcolor",a)},dm:function(a,b){this.eo&&(this.eo.setAttribute(this.ba, a,b||"",this.QL()),this.dispatchEvent(new Q("onlineupdate")))},xk:function(){var a=this;if(!a.tc.length)for(var b=this.YL(),c=function(b){a.Rv(b)},e=ba(),f=function(b){a.cB(b)},g=function(b){a.bQ(b)},i=0,k=b.length;i<k;i++){var m=b[i],n=new ai(m.Hb,m.rc);n.addEventListener("ondragging",c);n.addEventListener("ondragstart",e);n.addEventListener("ondragend",f);n.addEventListener("ondelVertexMarker",g);n.index=i;n.rc=m.rc;this.tc.push(n);this.map&&this.map.Pa(n)}},ii:function(){for(var a;a=this.tc.pop();)this.map.Jb(a); this.tc.length=0},YL:function(){for(var a=[],b=0,c=this.ia.length;b<c;b++){var e=this.ia[b];a.push({Hb:e,rc:0});if(b<c-1){var f=this.ia[b+1],e=new R((e.lng+f.lng)/2,(e.lat+f.lat)/2);a.push({Hb:e,rc:1})}}return this.lc=a},m2:ba(),cB:function(a){this.Wa.qj&&(this.map.Jb(this.Wa.qj),delete this.Wa.qj);this.Wa.Fi&&(this.map.Jb(this.Wa.Fi),delete this.Wa.Fi);this.Wa.Bi&&(this.map.Jb(this.Wa.Bi),delete this.Wa.Bi);var b=a.yf,a=a.currentTarget.index,c;if(0!==a%2){this.xl(a);this.Oq(a,b,0);var e=fb(this.lc[a- 1].Hb,this.map.K.Ma);c=fb(this.lc[a+1].Hb,this.map.K.Ma);e=this.at(e,b);c=this.at(b,c);this.Oq(a,e,1);this.Oq(a+2,c,1);a=Math.ceil(a/2);c=this.ia.slice();a=c.splice(a,this.ia.length-a);c[c.length]=b;c=c.concat(a)}else this.lc[a].Hb=b,0<=a-2&&(e=fb(this.lc[a-2].Hb,this.map.K.Ma),e=this.at(e,b),this.tc[a-1].show(),this.tc[a-1].ta(e)),a+2<this.lc.length&&(c=fb(this.lc[a+2].Hb,this.map.K.Ma),c=this.at(b,c),this.tc[a+1].show(),this.tc[a+1].ta(c)),this instanceof Qd&&this.lc.length-1===a&&(this.xl(0),this.Oq(0, b,0),this.xl(1),this.Oq(1,this.at(fb(this.lc[0].Hb,this.map.K.Ma),fb(this.lc[1].Hb,this.map.K.Ma)),1),this.tc[0].ba.style.zIndex="-10000000"),a/=2,this.ia.splice(a,1,b),this instanceof Qd&&this.ia.length-1===a&&this.ia.splice(0,1,b),c=this.ia;b=0;for(a=this.tc.length;b<a;b++)this.tc[b].index=b;this.ia=c;this.Yr(c);this.D.xe===q&&(this.ii(),this.xk())},bQ:function(a){if(0===a.target.type||0===a.target.rc){var b=[];if(6>this.lc.length)alert("\\u70b9\\u4f4d\\u5927\\u4e8e3,\\u624d\\u80fd\\u5220\\u9664");else{0== a.target.index||a.target.index==this.lc.length-1?this instanceof Qd?(this.xl(this.lc.length-1),this.xl(0)):this.xl(a.target.index):this.xl(a.target.index);this.ii();for(a=0;a<this.lc.length;a++)0===this.lc[a].rc&&b.push(this.lc[a].Hb);this.ia=b;this.ia[0].lng==this.ia[this.ia.length-1].lng&&this.ia[0].lat==this.ia[this.ia.length-1].lat&&this.ia.splice(this.ia.length-1,1);this.Qd(this.ia)}}else alert("\\u53ea\\u80fd\\u5220\\u9664\\u5b9e\\u70b9")},Oq:function(a,b,c){var e=this;this.lc.splice(a,0,{Hb:b,rc:c}); b=new ai(b,c);b.addEventListener("ondragging",function(a){e.Rv(a)});b.addEventListener("ondragstart",ba());b.addEventListener("ondragend",function(a){e.cB(a)});b.index=a;b.rc=c;this.tc.splice(a,0,b);this.map.Pa(b)},xl:function(a){this.map.Jb(this.tc[a]);this.lc.splice(a,1);this.tc.splice(a,1)},at:function(a,b){return new N((a.lng+b.lng)/2,(a.lat+b.lat)/2)},wS:function(a){var b,c,e,f,g,i,k=[],m=this.map.cf(a),k=this.vv(this.ia)[0],n=k.length;if(1<n){for(f=1;f<n;f++){var o=k[f-1],p=k[f];if(o&&p){o.x!== p.x?(g=(p.y-o.y)/(p.x-o.x),g=Math.abs(g*m.x+(p.y-g*p.x)-m.y)/Math.sqrt(g*g+1)):g=Math.abs(m.x-p.x);var v=Math.pow(p.y-o.y,2)+Math.pow(p.x-o.x,2),p=Math.pow(p.y-m.y,2)+Math.pow(p.x-m.x,2),o=Math.pow(o.y-m.y,2)+Math.pow(o.x-m.x,2),z=Math.pow(g,2);p-z+o-z>v&&(g=Math.sqrt(Math.min(p,o)));if(b==s||b>g)c=Math.sqrt(o-z)/Math.sqrt(v),e=Math.sqrt(p-z)/Math.sqrt(v),b=g,i=f;b=Math.min(b,g)}}if(!(this instanceof Rd)){g=m=0;v=this.ia;for(f=0;f<n;f++)m=f===n-1?0:m+1,v[f].lat!==v[m].lat&&((a.lat>=v[f].lat&&a.lat< v[m].lat||a.lat>=v[m].lat&&a.lat<v[f].lat)&&a.lng<(v[m].lng-v[f].lng)*(a.lat-v[f].lat)/(v[m].lat-v[f].lat)+v[f].lng)&&g++;b=Math.min(b,0<g%2?0:b)}1<c&&(c=1);1<e&&(c=0);a=k[i-1].y-k[i].y;f=k[i-1].x-(k[i-1].x-k[i].x)*c;g=k[i-1].y-a*c}return{$a:new T(f,g),Ga:b}},show:function(){rb.prototype.show.call(this);this.draw();this.D.xe===q&&this.xk()},$:function(){rb.prototype.$.call(this);this.D.xe===q&&this.ii()},remove:function(){wd.prototype.remove.call(this);this.D.xe===q&&this.ii()}}); function gi(a,b){var c={top:0,bottom:0,right:0,left:0,all:0},e=a.x,f=a.y;f<b.cg?(c.top=8,c.all+=c.top):f>b.zi&&(c.bottom=4,c.all+=c.bottom);e>b.yi?(c.right=2,c.all+=c.right):e<b.bg&&(c.left=1,c.all+=c.left);return c} function fi(a,b){if(1>=a.length)return a;var c=a,e=b!==l?b*b:1,f=c.length,g=new ("undefined"!==typeof Uint8Array?Uint8Array:Array)(f),i=0,k=f-1,m=[],n=[],o,p,v,z;for(g[i]=g[k]=1;k;){p=0;for(o=i+1;o<k;o++){v=c[o];var B=c[i],A=c[k],D=B.lng,B=B.lat,F=A.lng-D,G=A.lat-B;if(0!==F||0!==G){var H=((v.lng-D)*F+(v.lat-B)*G)/(F*F+G*G);1<H?(D=A.lng,B=A.lat):0<H&&(D+=F*H,B+=G*H)}F=v.lng-D;G=v.lat-B;v=F*F+G*G;v>p&&(z=o,p=v)}p>e&&(g[z]=1,m.push(i,z,z,k));k=m.pop();i=m.pop()}for(o=0;o<f;o++)g[o]&&n.push(c[o]);return n} W(Zg,{show:Zg.show,hide:Zg.$,remove:Zg.remove,setPath:Zg.Qd,setPositionAt:Zg.vn,setStrokeColor:Zg.setStrokeColor,setStrokeWeight:Zg.oq,setStrokeOpacity:Zg.mq,setFillOpacity:Zg.fu,setStrokeStyle:Zg.nq,setFillColor:Zg.setFillColor,getDom:Zg.fd});w.extend(Rd.prototype,{initialize:function(a){yd.prototype.initialize.call(this,a);this.eJ=[0];this.am=[0];this.bm=[0];for(var a=1,b=this.ia,c=b.length;a<c;a++){this.eJ[a]=U.Jk(b[a],b[a-1]);var e=U.Qa(b[a-1]),f=U.Qa(b[a]);this.am[a]=90-180*Math.atan2(f.lat-e.lat,f.lng-e.lng)/Math.PI;this.bm[a]=this.bm[a-1]+this.eJ[a]}this.XS=this.bm[c-1];this.bw();this.aw={};this.dJ={};return this.ba},bw:function(){this.setFillColor("");this.setStrokeColor(this.D.strokeColor);this.oq(this.D.qc);this.nq(this.D.strokeStyle); this.mq(this.D.xd)},NH:function(a){if(!a)return[];for(var b=this.map,c=[],e=0;e<a.length;e++)c.push(b.sZ(a[e].Ah));return[c].concat(this.gQ(c,b.ka(),q))},gQ:function(a,b,c){for(var e=this.map,b=b||e.ka(),f=[],g=[],b=c?e.n1(b):Bb,c=0;c<a.length;c++)f.push(new T(a[c].x-b,a[c].y)),g.push(new T(a[c].x+b,a[c].y));return[f,g]},vv:function(a){var b=this.map,c=[],e=b.Jd(),f=this.Jd();if(!e.Bt(f)||0==a.length||!this.ba||!this.Nc())return[c];!(M()&&5E3<a.length)&&!this.D.xe&&(e=this.Km(b.ka()),this.lf[e]?a= this.lf[e]:(f=fi(a,this.Mk(b.ka())),a=this.lf[e]=f));c.push(b.cf(a[0]));for(var g=e=1,f=a.length;e<f;e++){var i=b.cf(a[e]);i.Tb(c[g-1])||(c.push(i),g++)}a=[];e=b.offsetX;f=b.offsetY;g=b.K.gx;b={bg:-e-g,cg:-f-g,yi:-e+g+b.width,zi:-f+g+b.height};e=0;for(f=c.length-1;e<f;e++){var k=c[e],m=c[e+1],g=b,n=i=t,o=t,k=new T(k.x,k.y),m=new T(m.x,m.y),p=gi(k,g),v=gi(m,g),z=l,B=l,A=l,D=g.bg,F=g.cg,G=g.yi,H=g.zi;do 0===p.all&&0===v.all?o=i=q:0!==(p.all&v.all)?o=q:(z=0!==p.all?p:v,z.top?(B=k.x+(m.x-k.x)*(F-k.y)/ (m.y-k.y),A=F):z.bottom?(B=k.x+(m.x-k.x)*(H-k.y)/(m.y-k.y),A=H):z.right?(A=k.y+(m.y-k.y)*(G-k.x)/(m.x-k.x),B=G):z.left&&(A=k.y+(m.y-k.y)*(D-k.x)/(m.x-k.x),B=D),n=q,z.all===p.all)?(k.x=Math.round(B),k.y=Math.round(A),p=gi(k,g)):(m.x=Math.round(B),m.y=Math.round(A),v=gi(m,g));while(!o);g=i?{JN:new T(k.x,k.y),KN:new T(m.x,m.y),clip:n?q:t}:l;g&&a.push(g)}c=[[]];e=0;for(f=a.length;e<f;e++)a[e].clip?(c[c.length-1].push(a[e].JN),c[c.length-1].push(a[e].KN),a[e+1]&&a[e+1].clip&&c.push([])):(c[c.length-1].push(a[e].JN), e==a.length-1&&c[c.length-1].push(a[e].KN));return c},hide:function(){yd.prototype.$.call(this);if(this.D.si&&0<this.D.si.length)for(var a=0,b=this.D.si.length;a<b;a++)this.D.si[a].hide()},show:function(){yd.prototype.show.call(this);if(this.D.si&&0<this.D.si.length)for(var a=0,b=this.D.si.length;a<b;a++)this.D.si[a].show()},AR:function(a){var b=this.xx(),c=b.ka(),e=b.Jd(),f=this.D.si,g=yd.prototype.vv.call(this,this.ia),i=!this.D.xe;if(i&&this.aw[c]&&1<this.aw[c].length)this.hj=this.aw[c],this.am= this.dJ[c];else{for(var k=[0],m=[0],n=1,g=g[0],o=g.length;n<o;n++)k[n]=k[n-1]+Rb(g[n],g[n-1]),m[n]=90+180*Math.atan2(g[n].y-g[n-1].y,g[n].x-g[n-1].x)/Math.PI;this.hj=this.aw[c]=k;this.am=this.dJ[c]=m}for(n=0;n<f.length;n++){var k=f[n],m=k.p0,p;i&&k.Vv[c]&&0<k.Vv[c].length?g=k.Vv[c]:(g=k.zQ(this),1<g.length&&(k.Vv[c]=g));if(1===g.length)e.zs(g[0].point)&&(k.$c[0]&&(b.Jb(k.$c[0]),k.$c[0].remove()),k.kL||(7===m.Nb||5===m.Nb?m.setRotation(-180+this.am[g[0].index]):m.setRotation(this.am[g[0].index])), k.$c[0]=new Ed(g[0].point,{icon:m}),b.Pa(k.$c[0]));else if(1<g.length){var v=[],z,B={};if(!i||a&&("onzoomend"===a.type||"onmoveend"===a.type)){for(var A in k.$c)b.Jb(k.$c[A]),k.$c[A].remove();k.$c=[]}else w.mc.Pb(k.$c,function(a){if(e.zs(a.la())){z=""+a.la().lat+(""+a.la().lng);B[z]=q;v.push(a)}else{b.Jb(a);a.remove()}}),k.$c=v;for(A=0;A<g.length;A++){p=g[A].index;var o=g[A].point,D=""+o.lat+(""+o.lng);e.zs(o)&&!B[D]&&(k.kL||(7===m.Nb||5===m.Nb?m.setRotation(-180+this.am[p]):m.setRotation(this.am[p])), o=new Ed(o,{icon:m}),k.$c.push(o),b.Pa(o))}}}},Rv:function(a){var b=a.currentTarget,c=a.yf,e=b.index,f=this.lc,g,i=a=s;if(0==e){var k=fb(f[e+2].Hb,this.map.K.Ma);g=[c,k];a=new N((k.lng+c.lng)/2,(k.lat+c.lat)/2);this.tc[e+1]&&this.tc[e+1].$()}else if(e==f.length-1){var m=fb(f[e-2].Hb,this.map.K.Ma);g=[m,c];a=new N((m.lng+c.lng)/2,(m.lat+c.lat)/2);this.tc[e-1]&&this.tc[e-1].$()}else m=fb(f[e-1].Hb,this.map.K.Ma),k=fb(f[e+1].Hb,this.map.K.Ma),g=[m,c,k],b.rc||(m=fb(f[e-2].Hb,this.map.K.Ma),k=fb(f[e+2].Hb, this.map.K.Ma),g=[m,c,k],a=new N((m.lng+c.lng)/2,(m.lat+c.lat)/2),i=new N((k.lng+c.lng)/2,(k.lat+c.lat)/2),this.tc[e-1]&&this.tc[e-1].$(),this.tc[e+1]&&this.tc[e+1].$());this.Wa.qj?(this.Wa.qj.Qd(g),this.Wa.qj.show()):(b=new Rd(g,{strokeStyle:"dashed",strokeColor:this.D.strokeColor,qc:this.D.qc,xd:this.D.xd,FE:this.D.FE}),this.map.Pa(b),b.$(),this.Wa.qj=b);!this.Wa.Fi&&a?(this.Wa.Fi=new ai(a,1),this.map.Pa(this.Wa.Fi)):a&&this.Wa.Fi.ta(a);!this.Wa.Bi&&i?(this.Wa.Bi=new ai(i,1),this.map.Pa(this.Wa.Bi)): i&&this.Wa.Bi.ta(i)}});w.mc.remove=function(a,b){for(var c=a.length;c--;)a[c]===b&&a.splice(c,1);return a};w.extend(Qd.prototype,{initialize:function(a){yd.prototype.initialize.call(this,a);this.setStrokeColor(this.D.strokeColor);this.oq(this.D.qc);this.nq(this.D.strokeStyle);this.setFillColor(this.D.fillColor);this.mq(this.D.xd);this.fu(this.D.Cg);return this.ba},vn:function(a,b){this.Lo[a]&&(this.lf.length=0,this.Lo[a]=new R(b.lng,b.lat),this.ia[a]=new R(b.lng,b.lat),0==a&&!this.ia[0].Tb(this.ia[this.ia.length-1])&&(this.ia[this.ia.length-1]=new R(b.lng,b.lat)),this.Kh(),this.D.xe==q&&(this.ii(),this.xk()), this.draw(),this.dispatchEvent(new Q("onlineupdate")))},bw:function(){this.setStrokeColor(this.D.strokeColor);this.oq(this.D.qc);this.nq(this.D.strokeStyle);this.setFillColor(this.D.fillColor);this.mq(this.D.xd);this.fu(this.D.Cg)},containPoint:function(a){var b=this.ia,c=t;if(a instanceof R||a instanceof N){if(this.av.zs(a)){for(var e=a.lat,a=a.lng,f=0,g=b.length-1;f<b.length;g=f++){var i=b[f].lat,k=b[f].lng,m=b[g].lat,g=b[g].lng;k>a!=g>a&&e<(m-i)*(a-k)/(g-k)+i&&(c=!c)}return c}return t}},Rv:function(a){var b= a.currentTarget,c=a.point,e=b.index,f=this.lc,g,i=a=s;if(0==e){var k=ob(f[f.length-2].Hb,this.map.K.Ma),m=ob(f[e+2].Hb,this.map.K.Ma);g=[k,c,m];b.rc||(a=new R((k.lng+c.lng)/2,(k.lat+c.lat)/2),i=new R((m.lng+c.lng)/2,(m.lat+c.lat)/2))}else e==f.length-1?(m=ob(f[2].Hb,this.map.K.Ma),k=ob(f[e-2].Hb,this.map.K.Ma),g=[k,c,m],b.rc||(a=new R((k.lng+c.lng)/2,(k.lat+c.lat)/2),i=new R((m.lng+c.lng)/2,(m.lat+c.lat)/2))):(k=ob(f[e-1].Hb,this.map.K.Ma),m=ob(f[e+1].Hb,this.map.K.Ma),g=[k,c,m],b.rc||(k=ob(f[e-2].Hb, this.map.K.Ma),m=ob(f[e+2].Hb,this.map.K.Ma),g=[k,c,m],a=new R((k.lng+c.lng)/2,(k.lat+c.lat)/2),i=new R((m.lng+c.lng)/2,(m.lat+c.lat)/2),this.tc[e-1]&&this.tc[e-1].$(),this.tc[e+1]&&this.tc[e+1].$()));this.Wa.qj?this.Wa.qj.Qd(g):(b=new Rd(g,{strokeStyle:"dashed",strokeColor:this.D.strokeColor,qc:this.D.qc,xd:this.D.xd}),this.map.Pa(b),this.Wa.qj=b);!this.Wa.Fi&&a?(this.Wa.Fi=new ai(a,1),this.map.Pa(this.Wa.Fi)):a&&this.Wa.Fi.ta(a);!this.Wa.Bi&&i?(this.Wa.Bi=new ai(i,1),this.map.Pa(this.Wa.Bi)):i&& this.Wa.Bi.ta(i)}});W(ah,{setPositionAt:ah.vn});w.extend(Sd.prototype,{initialize:function(a){Qd.prototype.initialize.call(this,a);this.ia=this.xv(this.point,this.Da);this.Kh();return this.ba},zf:function(a,b){a&&(this.lf.length=0,b||(this.lc=s),this.point=a,this.ia=this.xv(a,this.Da),this.Kh(),this.draw(),this.dispatchEvent(new Q("onlineupdate")))},Af:function(a,b){isNaN(a)||(this.lf.length=0,b||(this.lc=s),this.Da=Math.abs(a),this.ia=this.xv(this.point,this.Da),this.Kh(),this.draw(),this.dispatchEvent(new Q("onlineupdate")))},Mk:function(a){return this.D.Mk? this.D.Mk(a):Sd.VE[this.Km(a)]},Rv:function(a){var b,a=a.currentTarget,c=this.lc;b=c[0].Hb;c=c[c.length-1].Hb;0==a.index?(b=a.la(),a=c):a=a.la();this.Af(U.Jk(fb(b,this.map.K.Ma),fb(a,this.map.K.Ma)),q);this.zf(b,q)},cB:function(a){var a=a.currentTarget,b=a.index;this.lc[0]={Hb:this.point,rc:0};1==b&&(this.lc[1]={Hb:a.point,rc:0});this.ii();this.xk()},YL:function(){if(!this.lc){var a=[];a.push({Hb:this.point,rc:0});a.push({Hb:this.ia[Math.floor(3*this.ia.length/4)],rc:0});this.lc=a}return this.lc}}); W($g,{setCenter:$g.zf,setRadius:$g.Af});var ei={dt:function(a){ei["_"+a.ca]||(ei["_"+a.ca]={});switch(a.K.ZK){case 1:return ei.RL(a);case 2:return ei.ZL(a);case 3:return ei.JD(a)}if(M()&&ei.AM()&&4!==a.K.ZK)return ei.JD(a);if(ei.cZ())return ei.RL(a);if(ei.dZ())return ei.ZL(a);if(ei.AM())return ei.JD(a)},RL:function(a){ei["_"+a.ca].xJ||(ei["_"+a.ca].xJ=new C.WP(a));return ei["_"+a.ca].xJ},ZL:function(a){ei["_"+a.ca].LJ||(ei["_"+a.ca].LJ=new C.ZP(a));return ei["_"+a.ca].LJ},JD:function(a){ei["_"+a.ca].kH||(ei["_"+a.ca].kH=new C.wP(a));return ei["_"+ a.ca].kH},dZ:function(){if(Tb(ei.FO))return ei.FO;var a=Zb();return ei.FO=a},cZ:function(){Tb(ei.EO)||(ei.EO=$b());return ei.EO},AM:function(){Tb(ei.DO)||(ei.DO=ac());return ei.DO}};C.Hq=ei; ');
